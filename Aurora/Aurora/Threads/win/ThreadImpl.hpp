#ifndef THREADIMPL_HPP
#define THREADIMPL_HPP

#include <windows.h>


namespace Aurora
{
	namespace Threads
	{
		class Thread;

		namespace priv
		{
			////////////////////////////////////////////////////////////
			/// \brief Windows implementation of threads
			////////////////////////////////////////////////////////////
			class ThreadImpl
			{
			public :

				////////////////////////////////////////////////////////////
				/// \brief Default constructor, launch the thread
				///
				/// \param owner The Thread instance to run
				///
				////////////////////////////////////////////////////////////
				ThreadImpl(Thread* owner);

				////////////////////////////////////////////////////////////
				/// \brief Destructor
				///
				////////////////////////////////////////////////////////////
				~ThreadImpl();

				////////////////////////////////////////////////////////////
				/// \brief Wait until the thread finishes
				///
				////////////////////////////////////////////////////////////
				void wait();

				////////////////////////////////////////////////////////////
				/// \brief Terminate the thread
				///
				////////////////////////////////////////////////////////////
				void terminate();

			private :

				////////////////////////////////////////////////////////////
				/// \brief Global entry point for all threads
				///
				/// \param userData User-defined data (contains the Thread instance)
				///
				/// \return OS specific error code
				///
				////////////////////////////////////////////////////////////
				static unsigned int __stdcall entryPoint(void* userData);

				////////////////////////////////////////////////////////////
				// Member data
				////////////////////////////////////////////////////////////
				HANDLE m_thread; ///< Win32 thread handle
				unsigned int m_threadId; ///< Win32 thread identifier
			};

		} // namespace priv

	} // namespace sf
}


#endif // SFML_THREADIMPL_HPP
